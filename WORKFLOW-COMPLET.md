# üé¨ Workflow Complet d'Automatisation - Le Trousseau

> Syst√®me d'automatisation IA pour **Le Trousseau** - Association artistique

## üéØ Comptes concern√©s

- **YouTube** : [@LeTrousseau-en-video](https://www.youtube.com/@LeTrousseau-en-video)
- **Instagram** : [@letrousseau_en_video](https://www.instagram.com/letrousseau_en_video/)
- **Twitter** : [@Le_Trousseau_](https://x.com/Le_Trousseau_)
- **Site web** : [asso-letrousseau.com](https://www.asso-letrousseau.com)
- **Newsletter** : Abonn√©s via le site

---

## üìä Vue d'ensemble

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   NOUVELLE VID√âO YOUTUBE                      ‚îÇ
‚îÇ                    (D√©tection automatique)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                          ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   √âTAPE 1 : EXTRACTION              ‚îÇ
        ‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ             ‚îÇ
        ‚îÇ   ‚Ä¢ M√©tadonn√©es vid√©o               ‚îÇ
        ‚îÇ   ‚Ä¢ Transcription audio ‚Üí texte     ‚îÇ
        ‚îÇ   ‚Ä¢ T√©l√©chargement vid√©o source    ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ             ‚îÇ               ‚îÇ
        ‚ñº             ‚ñº               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇTRANSCRIP ‚îÇ  ‚îÇ  CLIPPAGE    ‚îÇ  ‚îÇ SCREENSHOTS ‚îÇ
‚îÇ  TION    ‚îÇ  ‚îÇ   VID√âO      ‚îÇ  ‚îÇ   & FRAMES  ‚îÇ
‚îÇ          ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ             ‚îÇ
‚îÇ Whisper  ‚îÇ  ‚îÇ FFmpeg       ‚îÇ  ‚îÇ  FFmpeg     ‚îÇ
‚îÇ API      ‚îÇ  ‚îÇ 10-60s clips ‚îÇ  ‚îÇ  Moments    ‚îÇ
‚îÇ          ‚îÇ  ‚îÇ Formats:     ‚îÇ  ‚îÇ  cl√©s       ‚îÇ
‚îÇ          ‚îÇ  ‚îÇ ‚Ä¢ 9:16       ‚îÇ  ‚îÇ             ‚îÇ
‚îÇ          ‚îÇ  ‚îÇ ‚Ä¢ 1:1        ‚îÇ  ‚îÇ             ‚îÇ
‚îÇ          ‚îÇ  ‚îÇ ‚Ä¢ 16:9       ‚îÇ  ‚îÇ             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ               ‚îÇ                  ‚îÇ
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   √âTAPE 2 : ANALYSE IA              ‚îÇ
        ‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                ‚îÇ
        ‚îÇ   ‚Ä¢ R√©sum√© intelligent              ‚îÇ
        ‚îÇ   ‚Ä¢ Identification moments cl√©s     ‚îÇ
        ‚îÇ   ‚Ä¢ G√©n√©ration de tags/hashtags     ‚îÇ
        ‚îÇ   ‚Ä¢ Analyse du ton                  ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   √âTAPE 3 : G√âN√âRATION CONTENU      ‚îÇ
        ‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ            ‚îÇ
        ‚îÇ   LLM adaptatif par plateforme      ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ             ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ
        ‚ñº             ‚ñº             ‚ñº              ‚ñº              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ TWITTER  ‚îÇ  ‚îÇINSTAGRAM ‚îÇ  ‚îÇ TIKTOK   ‚îÇ  ‚îÇSNAPCHAT  ‚îÇ  ‚îÇ WEBSITE  ‚îÇ
‚îÇ THREAD   ‚îÇ  ‚îÇCARROUSEL ‚îÇ  ‚îÇ CLIP     ‚îÇ  ‚îÇ  STORY   ‚îÇ  ‚îÇ ARTICLE  ‚îÇ
‚îÇ          ‚îÇ  ‚îÇ+ REELS   ‚îÇ  ‚îÇ          ‚îÇ  ‚îÇ          ‚îÇ  ‚îÇ          ‚îÇ
‚îÇ3-10 tweets‚îÇ ‚îÇ+ STORY   ‚îÇ  ‚îÇClip vert ‚îÇ  ‚îÇClip vert ‚îÇ  ‚îÇBlog post ‚îÇ
‚îÇTon adapt√©‚îÇ  ‚îÇMulti-img ‚îÇ  ‚îÇ15-60s    ‚îÇ  ‚îÇ10s       ‚îÇ  ‚îÇSEO opt   ‚îÇ
‚îÇLink fin  ‚îÇ  ‚îÇ          ‚îÇ  ‚îÇ          ‚îÇ  ‚îÇ          ‚îÇ  ‚îÇ          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ             ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ
     ‚ñº             ‚ñº             ‚ñº              ‚ñº              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   √âTAPE 4 : PUBLICATION                        ‚îÇ
‚îÇ                   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                          ‚îÇ
‚îÇ   ‚Ä¢ Publication principale imm√©diate                           ‚îÇ
‚îÇ   ‚Ä¢ Planning diffusion clips (√©tal√© sur plusieurs jours)       ‚îÇ
‚îÇ   ‚Ä¢ Ajout au thread √©pingl√© Twitter                           ‚îÇ
‚îÇ   ‚Ä¢ Newsletter (si activ√©e)                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   √âTAPE 5 : MONITORING              ‚îÇ
        ‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                ‚îÇ
        ‚îÇ   ‚Ä¢ Logs d√©taill√©s                  ‚îÇ
        ‚îÇ   ‚Ä¢ M√©triques de performance        ‚îÇ
        ‚îÇ   ‚Ä¢ Alertes en cas d'√©chec          ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ Workflow d√©taill√© par phase

### Phase 1 : D√©tection & Extraction (5-10 min)

```javascript
{
  "trigger": "YouTube video published",
  "videoId": "dQw4w9WgXcQ",
  "actions": [
    "Download video (yt-dlp)",
    "Extract audio",
    "Transcribe with Whisper API",
    "Extract metadata",
    "Store in database"
  ],
  "outputs": {
    "transcription": "Texte complet...",
    "metadata": {...},
    "videoFile": "/tmp/video_id.mp4"
  }
}
```

### Phase 2 : Clippage & Visuels (10-15 min)

```javascript
{
  "input": "Transcription + Video file",
  "analysis": {
    "keyMoments": [
      { "start": "00:30", "end": "00:45", "description": "Hook principal" },
      { "start": "05:20", "end": "05:50", "description": "Point cl√© #1" },
      { "start": "12:10", "end": "12:35", "description": "Conclusion" }
    ]
  },
  "clips": [
    {
      "id": "clip_1",
      "duration": 15,
      "formats": {
        "vertical": "/clips/clip_1_9x16.mp4",
        "square": "/clips/clip_1_1x1.mp4",
        "landscape": "/clips/clip_1_16x9.mp4"
      },
      "caption": "Generated by LLM",
      "hashtags": ["tag1", "tag2"]
    }
  ],
  "screenshots": [
    { "timestamp": "00:35", "path": "/screens/thumb_1.jpg" },
    { "timestamp": "05:25", "path": "/screens/thumb_2.jpg" }
  ]
}
```

### Phase 3 : G√©n√©ration de Contenu Adaptatif

#### Twitter Thread (adaptatif)

```javascript
{
  "videoLength": "15min",
  "contentDensity": "high",
  "threadSize": 7,  // Auto-calcul√©
  "tweets": [
    {
      "order": 1,
      "text": "üé¨ [Hook accrocheur bas√© sur transcription]\n\nJe vous explique [sujet] en 15min üëá",
      "media": ["screenshot_1.jpg"]
    },
    {
      "order": 2,
      "text": "1/ [Premier point d√©velopp√©]\n\n[2-3 phrases cl√©s extraites]"
    },
    // ... tweets 3-6 g√©n√©r√©s selon contenu
    {
      "order": 7,
      "text": "7/ [Conclusion + CTA]\n\nVid√©o compl√®te üëá\nhttps://youtu.be/dQw4w9WgXcQ"
    }
  ],
  "pinnedThreadAction": {
    "method": "addToExisting",
    "pinnedThreadId": "1234567890",
    "newTweetText": "üÜï [Titre vid√©o] - [Date]"
  }
}
```

#### Instagram Carrousel

```javascript
{
  "type": "carousel",
  "slides": [
    {
      "order": 1,
      "type": "image",
      "source": "youtube_thumbnail",
      "overlay": {
        "text": "NOUVELLE VID√âO",
        "style": "brand"
      }
    },
    {
      "order": 2,
      "type": "image",
      "source": "screenshot_key_moment_1"
    },
    {
      "order": 3,
      "type": "video_clip",
      "source": "clip_1_square.mp4",
      "duration": 15
    }
  ],
  "caption": "[L√©gende Instagram adapt√©e]",
  "hashtags": ["hashtag1", "hashtag2", ...],
  "location": null
}
```

#### Instagram Story Sequence

```javascript
{
  "stories": [
    {
      "order": 1,
      "type": "image",
      "source": "generated_story_template.jpg",
      "text": "NOUVELLE VID√âO üé¨",
      "stickers": [
        { "type": "countdown", "endsIn": "24h" }
      ]
    },
    {
      "order": 2,
      "type": "video",
      "source": "clip_1_vertical.mp4",
      "link": "https://youtu.be/..."
    }
  ]
}
```

### Phase 4 : Plan de Diffusion

```javascript
{
  "mainPublication": {
    "immediate": true,
    "platforms": ["website", "newsletter"],
    "timestamp": "2025-01-08T15:00:00Z"
  },
  "socialMedia": {
    "delay": "30min",  // Apr√®s publication principale
    "platforms": ["twitter", "instagram"],
    "timestamp": "2025-01-08T15:30:00Z"
  },
  "clipsSchedule": [
    {
      "clipId": "clip_1",
      "platforms": ["tiktok", "instagram_reels"],
      "scheduledFor": "2025-01-09T10:00:00Z",
      "caption": "Extrait #1 : [Description]"
    },
    {
      "clipId": "clip_2",
      "platforms": ["tiktok", "snapchat"],
      "scheduledFor": "2025-01-10T14:00:00Z",
      "caption": "Extrait #2 : [Description]"
    },
    {
      "clipId": "clip_3",
      "platforms": ["instagram_reels"],
      "scheduledFor": "2025-01-11T18:00:00Z",
      "caption": "Extrait #3 : [Description]"
    }
  ],
  "stories": {
    "frequency": "daily",
    "duration": "3_days",
    "schedule": [
      {
        "day": 1,
        "platforms": ["instagram", "snapchat"],
        "content": "story_1"
      },
      {
        "day": 2,
        "platforms": ["instagram"],
        "content": "story_2_reminder"
      },
      {
        "day": 3,
        "platforms": ["snapchat"],
        "content": "story_3_last_chance"
      }
    ]
  }
}
```

---

## üéØ Crit√®res de d√©cision automatiques

### Longueur du Thread Twitter

```javascript
function calculateThreadLength(video) {
  const baseLength = 3; // Minimum
  const factors = {
    duration: video.duration > 900 ? 2 : 1,  // +2 si > 15min
    transcriptionLength: Math.ceil(video.transcription.length / 5000),
    keyPoints: Math.ceil(video.keyMoments.length / 2)
  };
  
  return Math.min(
    baseLength + factors.duration + factors.transcriptionLength + factors.keyPoints,
    12  // Maximum 12 tweets
  );
}
```

### Nombre de Clips √† g√©n√©rer

```javascript
function determineClipsCount(video) {
  if (video.duration < 300) return 1;  // < 5min : 1 clip
  if (video.duration < 900) return 2;  // 5-15min : 2 clips
  if (video.duration < 1800) return 3; // 15-30min : 3 clips
  return 4;  // > 30min : 4 clips max
}
```

### Type de contenu Instagram

```javascript
function selectInstagramFormat(video, clips, screenshots) {
  const hasGoodClips = clips.filter(c => c.quality > 0.7).length > 0;
  const hasMultipleScreenshots = screenshots.length >= 3;
  
  if (hasGoodClips && hasMultipleScreenshots) {
    return {
      feed: "carousel",  // Miniature + screenshots + clip
      reels: clips[0],   // Meilleur clip
      story: "sequence"  // Multiple stories
    };
  } else if (hasGoodClips) {
    return {
      feed: "single_image",  // Miniature uniquement
      reels: clips[0],
      story: "single"
    };
  } else {
    return {
      feed: "single_image",
      reels: null,
      story: "static"
    };
  }
}
```

---

## üíæ Structure de donn√©es en base

### Table `video_processing`

```sql
CREATE TABLE video_processing (
  id VARCHAR(36) PRIMARY KEY,
  video_id VARCHAR(50) NOT NULL,
  job_id VARCHAR(100) NOT NULL,
  
  -- Transcription
  transcription_text LONGTEXT,
  transcription_provider ENUM('whisper', 'youtube', 'assemblyai'),
  transcription_language VARCHAR(10),
  transcription_duration INT,
  
  -- Summary
  summary TEXT,
  key_moments JSON,
  
  -- Files
  video_file_path VARCHAR(500),
  clips JSON,
  screenshots JSON,
  generated_images JSON,
  
  -- Status
  status ENUM('pending', 'transcribing', 'clipping', 'generating', 'completed', 'failed'),
  error_message TEXT,
  
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  
  FOREIGN KEY (video_id) REFERENCES videos(id),
  FOREIGN KEY (job_id) REFERENCES automation_logs(job_id)
);
```

### Table `scheduled_posts`

```sql
CREATE TABLE scheduled_posts (
  id INT AUTO_INCREMENT PRIMARY KEY,
  video_id VARCHAR(36) NOT NULL,
  platform ENUM('twitter', 'instagram', 'tiktok', 'snapchat', 'instagram_reels', 'instagram_story'),
  content_type ENUM('clip', 'image', 'story', 'post'),
  content_path VARCHAR(500),
  caption TEXT,
  scheduled_for DATETIME NOT NULL,
  status ENUM('pending', 'published', 'failed') DEFAULT 'pending',
  published_at DATETIME,
  platform_post_id VARCHAR(200),
  error_message TEXT,
  
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  
  FOREIGN KEY (video_id) REFERENCES videos(id),
  INDEX idx_scheduled_for (scheduled_for, status)
);
```

---

## üõ†Ô∏è Outils & Technologies

| Composant | Technologie | Fonction |
|-----------|-------------|----------|
| Transcription | Whisper API / YouTube API | Audio ‚Üí Texte |
| T√©l√©chargement | yt-dlp | R√©cup√©ration vid√©o source |
| Clippage | FFmpeg | Extraction segments vid√©o |
| Screenshots | FFmpeg | Extraction frames |
| G√©n√©ration d'images | DALL-E 3 / Stable Diffusion | Visuels pour stories |
| Analyse & Contenu | GPT-4 / Claude | Threads, captions, articles |
| Scheduling | BullMQ + Redis | File d'attente et planification |
| Stockage | S3 / MinIO | Clips et images |

---

## ‚è±Ô∏è Temps d'ex√©cution estim√©s

| √âtape | Dur√©e | D√©pend de |
|-------|-------|-----------|
| D√©tection vid√©o | < 1 min | Polling interval |
| T√©l√©chargement | 2-5 min | Longueur vid√©o |
| Transcription | 3-10 min | Longueur vid√©o |
| Clippage | 5-15 min | Nombre de clips |
| Analyse IA | 2-5 min | Complexit√© |
| G√©n√©ration contenu | 3-8 min | Nombre de plateformes |
| Publication | 2-5 min | Nombre de plateformes |
| **TOTAL** | **17-48 min** | Configuration |

**Note** : Le workflow s'ex√©cute en arri√®re-plan, aucune intervention manuelle n√©cessaire.

---

## üìà KPIs de succ√®s

- ‚úÖ **Taux de r√©ussite** : > 95% des vid√©os trait√©es sans erreur
- ‚úÖ **D√©lai de publication** : < 1h apr√®s publication YouTube
- ‚úÖ **Qualit√© des clips** : Score > 0.7 (√©valuation IA)
- ‚úÖ **Engagement Twitter** : Thread complet publi√© avec lien
- ‚úÖ **Coh√©rence tonale** : Match √† 85%+ avec historique compte
- ‚úÖ **Couverture plateformes** : 100% des plateformes actives

---

**Version** : 2.0.0  
**Derni√®re mise √† jour** : 2025-01-08
